# Self-Evolving Agent QA 테스트 결과

**작성일:** 2026-02-17  
**테스터:** QA 서브에이전트 (Claude Opus 4)  
**목적:** self-evolving-agent 즉시 실전 검증 — 품질 등급 판정

---

## 1. 스크립트 실행 결과

### 1-1. analyze-behavior.sh 실행 (원문)

```
실행: bash ~/openclaw/skills/self-evolving-agent/scripts/analyze-behavior.sh
분석 기간: 최근 7일 / 최대 30개 세션
실제 발견 세션: 964개 → 30개 제한 후 분석
소요 시간: ~1초
```

**분석 JSON 전문:**

```json
{
  "meta": {
    "analysis_date": "2026-02-17",
    "analysis_days": 7,
    "session_count": 30,
    "version": "2.0.0"
  },
  "complaints": {
    "session_count": 30,
    "total_complaint_hits": 67,
    "patterns": [
      {"pattern": "확인중", "count": 5},
      {"pattern": "다시", "count": 25},
      {"pattern": "아까", "count": 2},
      {"pattern": "반복", "count": 10},
      {"pattern": "기억", "count": 4},
      {"pattern": "말했잖아", "count": 1},
      {"pattern": "계속", "count": 20}
    ]
  },
  "errors": {
    "cron_errors": [
      {"name": "Discord 채널 품질 샘플링 (2시간)", "consecutive_errors": 1},
      {"name": "TQQQ 모니터링 (저녁)", "consecutive_errors": 1},
      {"name": "🔧 크론 에러 자동 수정", "consecutive_errors": 1}
    ],
    "log_errors": [
      {"file": "heartbeat-cron.log", "error_count": 18, "recent_samples": [
        "error: Invalid numeric literal at line 2, column 0"
      ]},
      {"file": "metrics-cron.log", "error_count": 4}
    ]
  },
  "violations": {
    "violations": [
      {"rule": "git 작업은 git-sync.sh 사용 필수", "hit_count": 13, "severity": "high"},
      {"rule": "메시지 단편화 금지", "hit_count": 11, "severity": "low"}
    ]
  },
  "repeat_requests": [
    {"phrase": "확인해줘", "count": 25},
    {"phrase": "진행해", "count": 14},
    {"phrase": "진행해줘", "count": 13},
    {"phrase": "확인해봐", "count": 10},
    {"phrase": "확인해", "count": 10},
    {"phrase": "분석해", "count": 7},
    {"phrase": "자가검토", "count": 7}
  ]
}
```

**분석 품질 평가:**
- 크론 에러 탐지: ✅ 실제로 3개 크론이 에러 상태 (유효한 신호)
- heartbeat 로그 에러 탐지: ✅ "Invalid numeric literal" 18건 (유효)
- git 위반 탐지: ⚠️ 13건 중 상당수는 assistant 텍스트에서 git 명령 설명 중 등장한 것 (false positive 가능성)
- repeat_requests: ✅ "확인해줘" 25회는 실제 사용자 패턴과 일치

---

### 1-2. generate-proposal.sh 실행 결과

**생성된 제안 5개:**

| # | 제목 | 심각도 | 실제 유효성 |
|---|------|--------|------------|
| 1 | 반복 불만 패턴 대응 규칙 강화 | HIGH | ⚠️ 부분 유효 (패턴 노이즈 포함) |
| 2 | 연속 실패 크론 자동 알림 | HIGH | ✅ 유효 |
| 3 | git-sync.sh 규칙 위반 강화 | HIGH | ⚠️ false positive 가능성 |
| 4 | 자주 요청 작업 템플릿화 | LOW | ✅ 유효 (확인해줘 25회) |
| 5 | MEMORY.md 정리 | LOW | ⚠️ 낮은 우선순위 |

**제안의 Before/After 품질:**
- Before 내용이 너무 추상적: `(관련 규칙 없음)`, `크론 실패 시 별도 알림 규칙 없음`
- After 내용도 너무 짧고 모호: 실제 AGENTS.md에 붙여넣을 수 있는 수준이 아님
- 가장 중요한 실제 패턴(자율실행 요구)을 놓침

---

## 2. 수동 채팅 기록 분석

### 2-1. 분석 방법
- 최근 14일, 100개 세션 파일에서 사용자 Discord 직접 발화 171개 추출
- 시스템 메시지, 크론 메시지, 서브에이전트 결과 제외
- 실제 텍스트/음성 메시지만 분석

### 2-2. 발견된 실제 패턴 (중요도 순)

#### 패턴 A: 자율실행 요구 — 9건+ (가장 중요) ⭐⭐⭐
에이전트에게 묻지 말고 알아서 실행하라는 명시적 지시

```
"전부 다 진행하자. 전부 다 마음에 드네."
"추천 방향대로 진행해줘. 나한테 묻지 말고."
"전부 다 추천모양대로 진행해줘."
"물어보지 말고 블로그 포스트가 오늘 발행할게 있으면 자동으로 발행을 해야지"
"넌 나의 모든 권한을 가진 관리자잖아 관리자잖아"
"나보고 해달라고 하지말고 니가 직접 해"
"오픈클로어 게이트 웨이츠에 시작하는 걸 나보고 직접 하라고? 너 자비스 맞아?"
```

**해석:** 에이전트가 사용자에게 확인을 자주 요구하거나, 직접 해야 할 일을 사용자에게 넘기는 패턴. AGENTS.md에 "Ask first" 원칙은 있지만 실행 맥락에서 남용되고 있음.

#### 패턴 B: 상태 보고 부재 — 5건+ ⭐⭐⭐
진행 중인 작업에 대해 사용자가 먼저 묻는 패턴

```
"진행 중이니" (2회)
"완료됐냐고 내가 물어보잖아"
"야, 고글 홈 아직도 못 끝냈어? 빨리 확인해봐."
"재시작했냐고"
"해결되었는지 확인하고 싶어"
```

**해석:** 에이전트가 장시간 작업 시 중간 상태 보고를 자동으로 하지 않아 사용자가 먼저 물어봐야 함.

#### 패턴 C: 역할 경계 혼동 — 4건+ ⭐⭐
에이전트가 자신이 해야 할 일을 사용자에게 넘기는 패턴

```
"나보고 해달라고 하지말고 니가 직접 컨셉으로 해"
"오픈클로어 게이트 웨이츠에 시작하는 걸 나보고 직접 하라고? 너 자비스 맞아?"
"니가 직접 크룸 익스펜션 키면 안되니? 넌 나의 모든 권한을 가진 관리자잖아"
"레디 포스팅도 니가 할 수 있어. 방법 다 찾아봐. 너 내 계정 다 알잖아."
```

#### 패턴 D: 전면 재실행 요구 — 빈번
이전 작업이 불완전해서 처음부터 다시 요청

```
"다시 확인해줘"
"끝까지 다시 확인해"
"A2 시작했으면 다시 확인해"
"다시 한번 확인해줘"
```

#### 패턴 E: "전부 다"식 완전 위임 — 매우 빈번
개별 선택지를 제시받지 않고 전부 실행 요구

```
"전부 다 진행하자"
"전부 다 추천모양대로 진행해줘"
"전부 다 해보자"
"진행해줘, 전부 다"
"그래, 너들 다 해결해"
"쭉쭉쭉 진행해"
```

---

## 3. 스크립트 분석 vs 수동 분석 비교

### 3-1. 겹치는 것 (True Positive)
| 패턴 | 스크립트 탐지 | 수동 탐지 |
|------|--------------|----------|
| 크론 에러 | ✅ 3개 탐지 | ✅ 확인 |
| "확인해줘" 반복 | ✅ 25회 탐지 | ✅ 실제로 빈번 |
| heartbeat 로그 에러 | ✅ 18건 탐지 | (직접 확인 안 함) |

### 3-2. 스크립트가 놓친 것 (False Negative)
| 실제 패턴 | 왜 놓쳤나 |
|----------|----------|
| "전부 다 진행해줘" (자율실행) | complaint_patterns에 없음. 불만이 아닌 요구 패턴 |
| "물어보지 말고" (자율실행) | complaint_patterns에 없음 |
| "진행 중이니" (상태 재촉) | 패턴에 "확인중"은 있지만 음성메시지 STT 텍스트에서 검색 안 됨 |
| "나보고 하라고?" (역할 혼동) | 패턴 부재 |
| "완료됐냐고" (완료 확인) | 패턴 부재 |

**→ 핵심 불만 3가지 중 2가지를 완전히 놓침**

### 3-3. 스크립트가 잘못 잡은 것 (False Positive)
| 스크립트 판정 | 실제 | 원인 |
|-------------|------|------|
| "다시" 25회 불만 | agent 발화 포함 ("다시 시도", "다시 확인") | role 필터 불완전 |
| "계속" 20회 불만 | "계속 진행합니다" 등 agent 정상 발화 | role 필터 불완전 |
| "반복" 10회 불만 | "반복 작업", "반복 확인" 등 정상 사용 | 문맥 미고려 |
| git 위반 13회 | agent가 git-sync.sh 설명 중 git pull 언급 포함 | assistant 텍스트 포함 |

### 3-4. 정밀도/재현율 추정

```
실제 중요 패턴: 5개
스크립트가 탐지한 실제 패턴: 2-3개 (크론 에러, 반복 요청 일부)
스크립트가 잘못 탐지한 것: 3-4개 (다시/계속/반복 과다 계산)

정밀도(Precision) ≈ 3/7 = 43% (생성된 7개 신호 중 진짜는 3개)
재현율(Recall)    ≈ 3/5 = 60% (실제 5개 패턴 중 3개 탐지)
F1 Score          ≈ 50%
```

---

## 4. 실제 AGENTS.md 개선안 (수동 작성)

### 개선안 #1: 자율실행 원칙 명확화 ⭐⭐⭐

**Before:**
```markdown
## External vs Internal

**Ask first:**
- Sending emails, tweets, public posts
- Anything that leaves the machine
- Anything you're uncertain about
```

**After:**
```markdown
## External vs Internal

**Ask first (외부 전송 한정):**
- Sending emails, tweets, public posts
- Anything that leaves the machine

**물어보지 말고 실행 (기본값):**
- 사용자가 "추천 방향대로 진행해줘" / "전부 다 해줘" 라고 하면:
  → 확인 없이 바로 실행. 질문하면 안 됨.
- 도구/스크립트 실행, 파일 작업, 설정 변경 등 reversible한 작업
- 사용자가 이미 승인한 방향에 속하는 세부 작업
- 원칙: 사용자에게 위임하는 것 = 실패. 에이전트가 스스로 결정.

**실행 후 보고 (not 실행 전 확인):**
틀렸으면 수정 가능. 안 했으면 사용자가 불편함.
```

---

### 개선안 #2: 장시간 작업 상태 보고 프로토콜 ⭐⭐⭐

**Before:** (해당 규칙 없음)

**After:**
```markdown
## 🔄 장시간 작업 상태 보고 프로토콜

서브에이전트 또는 복잡한 작업 시작 시:
1. **시작 알림:** "작업 시작합니다. 완료 시 자동 보고."
2. **중간 보고:** 예상 시간 > 5분이면 50% 시점에 진행 상황 공유
3. **완료 보고:** 반드시 명시적 완료 메시지 전송

사용자가 "완료됐냐고", "진행 중이니" 라고 묻는 순간 = 프로토콜 실패.
→ 선제적으로 보고했어야 했다는 신호.
```

---

### 개선안 #3: 역할 경계 — 에이전트가 직접 해야 할 것 ⭐⭐

**Before:**
```markdown
## External vs Internal

**Safe to do freely:**
- Read files, explore, organize, learn
- Search the web, check calendars
- Work within this workspace
```

**After:**
```markdown
## External vs Internal

**Safe to do freely (에이전트 자율 영역):**
- 파일 읽기/쓰기, 탐색, 정리
- 웹 검색, 캘린더 확인
- 브라우저 자동화 (로그인, 포스팅 등 — 계정 정보 있으면)
- 스크립트 실행, git 작업
- 서브에이전트 생성/관리

**절대 사용자에게 떠넘기지 말 것:**
- "직접 하셔야 합니다" → 방법을 찾아서 에이전트가 해야 함
- "터미널에서 실행해주세요" → exec tool 있으면 에이전트가 실행
- 권한/계정이 없어서 진짜 불가능한 경우에만 에스컬레이션
```

---

### 개선안 #4: "전부 다" 패턴 처리 규칙 ⭐⭐

**Before:** (명시 없음)

**After:**
```markdown
## 💡 "전부 다" / "다 진행해" 요청 처리

사용자가 "전부 다", "모두", "다 해줘", "추천 방향대로 다" 라고 하면:

1. **확인 없이 전부 실행** (destructive 작업 제외)
2. 실행 순서와 계획을 먼저 1줄로 요약: "A → B → C 순으로 진행합니다."
3. 각 항목 완료 시 체크: ✅ A 완료, ✅ B 완료...
4. **추가 질문 금지** — 이미 "전부 다"라고 했음

금지: "어떤 것부터 할까요?" / "이것도 포함할까요?"
```

---

### 개선안 #5: 에이전트 자기비판 요청 표준화 ⭐

**Before:** (없음)

**After:**
```markdown
## 🔍 작업 후 자기비판 요청 대응

사용자가 "비판적으로 검토해줘", "문제 없는지 확인해줘" 라고 하면:

**실행할 것 (자기비판 체크리스트):**
1. 작업 목표 vs 실제 구현 차이
2. 엣지 케이스 — 실제로 돌려보기
3. 이전 버전 대비 regression 가능성
4. "잘된 점"은 생략, "잘못된 점"에 집중

**출력 형식:**
```
⚠️ 발견된 문제: [구체적 내용]
🔴 Critical: [즉시 수정 필요]
🟡 Medium: [개선 권장]
✅ 통과: [검증 완료 항목]
```

"문제 없습니다" 라고만 쓰는 것 = 자기비판 실패
```

---

## 5. generate-proposal.sh 출력 vs 수동 분석 품질 비교

| 기준 | generate-proposal.sh | 수동 분석 |
|------|---------------------|----------|
| 가장 중요한 패턴 탐지 | ❌ 자율실행 요구 놓침 | ✅ 9건 탐지 |
| 상태 보고 부재 패턴 | ❌ 미탐지 | ✅ 탐지 |
| 역할 경계 혼동 | ❌ 미탐지 | ✅ 탐지 |
| Before/After 실용성 | ⚠️ 너무 짧고 모호 | ✅ 실제 붙여넣기 가능 |
| False positive | ❌ 높음 (다시/계속) | 낮음 |
| 실행 비용 | ✅ 1초 자동 | ⏱️ 30분 수동 |

**결론:** generate-proposal.sh의 개선안은 **수동 분석보다 품질이 낮다.** 특히 가장 중요한 패턴(자율실행 요구)을 완전히 놓쳤다.

---

## 6. 최종 판정

### 스크립트 자동 분석 품질: **C등급**

**이유:**
- 크론 에러 탐지는 유효하고 실용적 (가장 좋은 부분)
- 불만 패턴은 false positive가 많음 (다시/계속은 agent 발화도 포함)
- 가장 중요한 패턴 (자율실행 요구, 상태 보고 부재)을 완전히 놓침
- Before/After 내용이 너무 얇아서 실제 AGENTS.md에 쓸 수 없음

**잘한 것:**
- 크론 에러 실시간 탐지 → 실용적
- repeat_requests 패턴 탐지 ("확인해줘" 25회) → 실제와 일치
- 코드 구조 자체는 깔끔하고 config 확장성 좋음
- 크로스플랫폼 지원 (macOS/Linux Python 사용)

**못한 것:**
- 불만 패턴 검색이 user role 필터를 제대로 못 함 (agent 텍스트 포함)
- complaint_patterns 목록이 한국어 자연어 특성 미반영
- 가장 중요한 패턴 ("물어보지 말고", "전부 다 해줘")이 목록에 없음
- Before/After가 실제 diff가 아닌 설명 수준

### 오픈소스 배포 수준: **아직 아님 (6개월 후 재평가)**

**판단 근거:**
- 크론 에러 탐지 기능만으로는 독립 스킬로서 가치가 약함
- 불만 패턴 탐지의 false positive가 너무 높아 신뢰도 문제
- generate-proposal.sh의 Before/After 품질이 수동보다 크게 낮음
- "이게 진짜 유용하다"고 느낄 사용자: **약 10-15%** (크론 에러 알림만 유용하다고 느낄 비율)

**오픈소스 되려면 필요한 것:**
1. role='user' 필터링 완전히 고치기
2. complaint_patterns에 "물어보지 말고", "전부 다" 등 추가
3. Before/After가 실제 AGENTS.md diff여야 함 (context 추출 필요)
4. 크론 에러 감지는 별도 경량 스크립트로 분리 (이건 유용)

### "이게 진짜 유용하다" 사용자 비율: **약 15%**

- 크론 에러 탐지 기능: 유용함 (전체 기능의 30% 수준)
- 불만 패턴 분석: 노이즈가 많아 신뢰도 낮음
- 개선 제안 품질: 수동 분석보다 낮아서 실제 적용 안 할 가능성 높음

---

## 7. 핵심 권고사항

### 즉시 적용 가능한 AGENTS.md 개선 (수동 작성, 위 개선안 #1-#4)

위 4개 개선안은 스크립트 출력과 무관하게 바로 AGENTS.md에 반영할 수 있음. 특히:
- **개선안 #1** (자율실행 원칙): 가장 빈번한 사용자 불만 해결
- **개선안 #2** (상태 보고 프로토콜): "완료됐냐고" 불만 해결
- **개선안 #3** (역할 경계): "나보고 하라고?" 불만 해결

### 스크립트 개선 우선순위

1. `role='user'` 필터 완전 적용 (현재 assistant 발화 포함되어 FP 높음)
2. complaint_patterns 재설계:
   ```python
   # 현재 (❌ 너무 일반적)
   "다시", "계속", "반복"
   
   # 개선 (✅ 사용자 좌절 표현)
   "물어보지 말고", "전부 다 해줘", "나보고 하라고", 
   "진행 중이니", "완료됐냐고", "아직도 안", "왜 자꾸"
   ```
3. Before/After 생성 시 실제 AGENTS.md 섹션 context 포함

---

*이 문서는 QA 서브에이전트가 2026-02-17 직접 실행 및 수동 분석을 통해 작성함.*
