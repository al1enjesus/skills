# ğŸ§  Self-Evolving Agent Dashboard

A local web dashboard for visualizing self-evolving-agent v4.1 data.  
**Zero dependencies. No npm. No build step. Pure HTML + vanilla JS.**

---

## Quick Start

```bash
# From the skill root directory:
bash dashboard/serve.sh
# â†’ Open: http://localhost:8420/dashboard/

# Custom port:
bash dashboard/serve.sh 9000
# â†’ Open: http://localhost:9000/dashboard/
```

---

## What it shows

| Panel | Data source |
|---|---|
| **ğŸ“ˆ Quality Trend** | `quality_score` from each proposal JSON over time |
| **ğŸ¥ AGENTS.md Health** | `benchmarks.agents_md_score` â€” structure score ring + history sparkline |
| **ğŸ” Pattern Frequency** | `pattern_frequencies` â€” stacked bar chart by week |
| **ğŸ“‹ Proposal History** | All proposals (applied/rejected/pending), severity, effect, period |
| **âš¡ Active Rules Effectiveness** | Measured rules (green=effective, blue=neutral, red=regressed) |

---

## How data gets loaded

The dashboard can't list directories via a plain HTTP server, so we use a **data index**:

```
data/proposals/*.json    â†  pipeline output (proposal JSONs)
          â†“
build-index.sh           â†  scans and writes dashboard/data-index.json
          â†“
data-index.json          â†  index of all files with their relative paths
          â†“
index.html (fetch)       â†  reads index â†’ fetches each file â†’ renders
```

### Update data without restarting the server

```bash
bash dashboard/build-index.sh
# Then reload the page
```

The server (`serve.sh`) automatically runs `build-index.sh` on startup.

---

## File structure

```
dashboard/
â”œâ”€â”€ index.html        â† Single self-contained dashboard (all HTML/CSS/JS inline)
â”œâ”€â”€ load-data.js      â† Data loader module (also inlined inside index.html)
â”œâ”€â”€ build-index.sh    â† Scans data/proposals/ â†’ writes data-index.json
â”œâ”€â”€ serve.sh          â† Starts python3 HTTP server from skill root
â”œâ”€â”€ data-index.json   â† Generated by build-index.sh (gitignored)
â””â”€â”€ README.md         â† This file
```

---

## Proposal JSON format

The dashboard reads files matching `data/proposals/*.json` and `data/proposals/archive/*.json`.

Expected schema (all fields optional â€” dashboard degrades gracefully):

```json
{
  "id": "proposal-20260218",
  "generated_at": "2026-02-18T22:00:00Z",
  "week_start": "2026-02-12",
  "week_end": "2026-02-18",
  "status": "pending",          // "applied" | "rejected" | "pending"
  "quality_score": 8.1,         // 0-10 float
  "sessions_analyzed": 28,
  "complaint_hits": 3,
  "exec_retry_events": 142,
  "proposals": [
    {
      "id": "my-rule-01",
      "title": "Rule title",
      "severity": "high",        // "critical" | "high" | "medium" | "low" | "info"
      "evidence": "Why this was proposed",
      "target_pattern": "regex|pattern",
      "pattern_hits_before": 18,
      "before": "Old behavior description",
      "after": "New behavior description",
      "effect": "effective",     // "effective" | "neutral" | "regressed" | null (pending)
      "pattern_hits_after": 2,
      "effect_delta": -88.9      // % change (negative = improvement)
    }
  ],
  "benchmarks": {
    "agents_md_score": 85,       // 0-100 int
    "agents_md_label": "Excellent",
    "missing_sections": [],
    "github_status": "ok",
    "clawhub_status": "ok"
  },
  "pattern_frequencies": {
    "ë‹¤ì‹œ": 11,
    "ê³„ì†": 6,
    "ë°˜ë³µ": 3
  }
}
```

---

## Tech notes

- **Charts**: Pure inline SVG (line chart, bar chart, sparkline) â€” no Chart.js, no CDN
- **Theme**: Dark developer theme (`#0d1117` base â€” GitHub-inspired)
- **Responsive**: 2-column grid on â‰¥1024px, 1-column on mobile
- **Tooltip**: Hover any data point for details
- **Server**: `python3 -m http.server` served from skill root so `data/` paths resolve

---

## Troubleshooting

| Problem | Fix |
|---|---|
| All panels show "No data" | Run `bash dashboard/build-index.sh` then reload |
| `data-index.json: HTTP 404` | Run `build-index.sh` from the skill root first |
| Chart bars look wrong | Check proposal JSON has `pattern_frequencies` object |
| Score ring shows 0 | Check `benchmarks.agents_md_score` exists in proposal JSON |
| Server won't start | Make sure port 8420 isn't in use: `lsof -i :8420` |

---

*Generated by Claude Code Â· self-evolving-agent v4.1*
